window.kalkComponent=function(t){function e(e){for(var n,r,i=e[0],l=e[1],c=0,a=[];c<i.length;c++)r=i[c],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&a.push(o[r][0]),o[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);for(u&&u(e);a.length;)a.shift()()}var n={},o={0:0};var r={};var i={4:function(){return{"./kalk_bg.js":{__wbindgen_string_new:function(t,e){return n[3].exports.f(t,e)},__wbindgen_throw:function(t,e){return n[3].exports.g(t,e)}}}}};function l(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,l),o.l=!0,o.exports}l.e=function(t){var e=[],n=o[t];if(0!==n)if(n)e.push(n[2]);else{var c=new Promise((function(e,r){n=o[t]=[e,r]}));e.push(n[2]=c);var a,s=document.createElement("script");s.charset="utf-8",s.timeout=120,l.nc&&s.setAttribute("nonce",l.nc),s.src=function(t){return l.p+""+({}[t]||t)+"."+t+".js"}(t);var u=new Error;a=function(e){s.onerror=s.onload=null,clearTimeout(f);var n=o[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",u.name="ChunkLoadError",u.type=r,u.request=i,n[1](u)}o[t]=void 0}};var f=setTimeout((function(){a({type:"timeout",target:s})}),12e4);s.onerror=s.onload=a,document.head.appendChild(s)}return({1:[4]}[t]||[]).forEach((function(t){var n=r[t];if(n)e.push(n);else{var o,c=i[t](),a=fetch(l.p+""+{4:"896d4536165199441d82"}[t]+".module.wasm");if(c instanceof Promise&&"function"==typeof WebAssembly.compileStreaming)o=Promise.all([WebAssembly.compileStreaming(a),c]).then((function(t){return WebAssembly.instantiate(t[0],t[1])}));else if("function"==typeof WebAssembly.instantiateStreaming)o=WebAssembly.instantiateStreaming(a,c);else{o=a.then((function(t){return t.arrayBuffer()})).then((function(t){return WebAssembly.instantiate(t,c)}))}e.push(r[t]=o.then((function(e){return l.w[t]=(e.instance||e).exports})))}})),Promise.all(e)},l.m=t,l.c=n,l.d=function(t,e,n){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},l.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)l.d(n,o,function(e){return t[e]}.bind(null,o));return n},l.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="",l.oe=function(t){throw console.error(t),t},l.w={};var c=window.webpackJsonpkalkComponent=window.webpackJsonpkalkComponent||[],a=c.push.bind(c);c.push=e,c=c.slice();for(var s=0;s<c.length;s++)e(c[s]);var u=a;return l(l.s=0)}([function(t,e,n){t.exports=n(2)},function(t,e,n){const o=new URL(document.currentScript.src),r=o.href.substring(0,o.href.lastIndexOf("/")+1);n.p||(n.p=r)},function(t,e,n){"use strict";n.r(e),n.d(e,"KalkCalculator",(function(){return Ct})),n.d(e,"ConsoleLine",(function(){return Y}));n(1);function o(){}function r(t){return t()}function i(){return Object.create(null)}function l(t){t.forEach(r)}function c(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(t){return 0===Object.keys(t).length}new Set;const u="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;class f{constructor(t){this.options=t,this._listeners="WeakMap"in u?new WeakMap:void 0}observe(t,e){return this._listeners.set(t,e),this._getObserver().observe(t,this.options),()=>{this._listeners.delete(t),this._observer.unobserve(t)}}_getObserver(){var t;return null!==(t=this._observer)&&void 0!==t?t:this._observer=new ResizeObserver((t=>{var e;for(const n of t)f.entries.set(n.target,n),null===(e=this._listeners.get(n.target))||void 0===e||e(n)}))}}f.entries="WeakMap"in u?new WeakMap:void 0;let d=!1;function p(t,e){t.appendChild(e)}function h(t,e,n){t.insertBefore(e,n||null)}function g(t){t.parentNode&&t.parentNode.removeChild(t)}function m(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function b(t){return document.createElement(t)}function w(t){return document.createTextNode(t)}function y(){return w(" ")}function x(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function v(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function k(t,e,n){e in t?t[e]="boolean"==typeof t[e]&&""===n||n:v(t,e,n)}function $(t,e){e=""+e,t.data!==e&&(t.data=e)}function _(t,e,n,o){null==n?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}function S(t,e,n){t.classList[n?"add":"remove"](e)}function E(t){const e={};for(const n of t)e[n.name]=n.value;return e}new Map;let N;function T(t){N=t}function O(){if(!N)throw new Error("Function called outside component initialization");return N}const C=[],M=[];let A=[];const R=[],L=Promise.resolve();let P=!1;function z(){P||(P=!0,L.then(H))}function j(t){A.push(t)}const W=new Set;let D=0;function H(){if(0!==D)return;const t=N;do{try{for(;D<C.length;){const t=C[D];D++,T(t),I(t.$$)}}catch(t){throw C.length=0,D=0,t}for(T(null),C.length=0,D=0;M.length;)M.pop()();for(let t=0;t<A.length;t+=1){const e=A[t];W.has(e)||(W.add(e),e())}A.length=0}while(C.length);for(;R.length;)R.pop()();P=!1,W.clear(),T(t)}function I(t){if(null!==t.fragment){t.update(),l(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(j)}}const q=new Set;let F;function U(t,e){t&&t.i&&(q.delete(t),t.i(e))}function X(t,e,n,o){if(t&&t.o){if(q.has(t))return;q.add(t),F.c.push((()=>{q.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}else o&&o()}function B(t,e){const n=e.token={};function o(t,o,r,i){if(e.token!==n)return;e.resolved=i;let c=e.ctx;void 0!==r&&(c=c.slice(),c[r]=i);const a=t&&(e.current=t)(c);let s=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==o&&t&&(F={r:0,c:[],p:F},X(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),F.r||l(F.c),F=F.p)})):e.block.d(1),a.c(),U(a,1),a.m(e.mount(),e.anchor),s=!0),e.block=a,e.blocks&&(e.blocks[o]=a),s&&H()}if(!(r=t)||"object"!=typeof r&&"function"!=typeof r||"function"!=typeof r.then){if(e.current!==e.then)return o(e.then,1,e.value,t),!0;e.resolved=t}else{const n=O();if(t.then((t=>{T(n),o(e.then,1,e.value,t),T(null)}),(t=>{if(T(n),o(e.catch,2,e.error,t),T(null),!e.hasCatch)throw t})),e.current!==e.pending)return o(e.pending,0),!0}var r}new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]);let J;function V(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];A.forEach((o=>-1===t.indexOf(o)?e.push(o):n.push(o))),n.forEach((t=>t())),A=e}(n.after_update),l(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function G(t,e,n,a,s,u,f,p=[-1]){const h=N;T(t);const m=t.$$={fragment:null,ctx:[],props:u,update:o,not_equal:s,bound:i(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(h?h.$$.context:[])),callbacks:i(),dirty:p,skip_bound:!1,root:e.target||h.$$.root};f&&f(m.root);let b=!1;if(m.ctx=n?n(t,e.props||{},((e,n,...o)=>{const r=o.length?o[0]:n;return m.ctx&&s(m.ctx[e],m.ctx[e]=r)&&(!m.skip_bound&&m.bound[e]&&m.bound[e](r),b&&function(t,e){-1===t.$$.dirty[0]&&(C.push(t),z(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(t,e)),n})):[],m.update(),b=!0,l(m.before_update),m.fragment=!!a&&a(m.ctx),e.target){if(e.hydrate){d=!0;const t=(w=e.target,Array.from(w.childNodes));m.fragment&&m.fragment.l(t),t.forEach(g)}else m.fragment&&m.fragment.c();e.intro&&U(t.$$.fragment),function(t,e,n,o){const{fragment:i,after_update:a}=t.$$;i&&i.m(e,n),o||j((()=>{const e=t.$$.on_mount.map(r).filter(c);t.$$.on_destroy?t.$$.on_destroy.push(...e):l(e),t.$$.on_mount=[]})),a.forEach(j)}(t,e.target,e.anchor,e.customElement),d=!1,H()}var w;T(h)}"function"==typeof HTMLElement&&(J=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(r).filter(c);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){l(this.$$.on_disconnect)}$destroy(){V(this,1),this.$destroy=o}$on(t,e){if(!c(e))return o;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){this.$$set&&!s(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});function K(t){let e;return{c(){e=b("p"),e.innerHTML="<slot></slot>",this.c=o,S(e,"result",!t[0])},m(t,n){h(t,e,n)},p(t,[n]){1&n&&S(e,"result",!t[0])},i:o,o:o,d(t){t&&g(e)}}}function Z(t,e,n){let{byuser:o=!1}=e;return t.$$set=t=>{"byuser"in t&&n(0,o=t.byuser)},[o]}class Q extends J{constructor(t){super();const e=document.createElement("style");e.textContent="p{margin-top:0;margin-bottom:5px;word-wrap:break-word}.result{margin-bottom:10px}",this.shadowRoot.appendChild(e),G(this,{target:this.shadowRoot,props:E(this.attributes),customElement:!0},Z,K,a,{byuser:0},null),t&&(t.target&&h(t.target,this,t.anchor),t.props&&(this.$set(t.props),H()))}static get observedAttributes(){return["byuser"]}get byuser(){return this.$$.ctx[0]}set byuser(t){this.$$set({byuser:t}),H()}}customElements.define("console-line",Q);var Y=Q;const tt=!1,et="attachShadow"in Element.prototype&&"getRootNode"in Element.prototype,nt=!(!et||!document.createElement("div").attachShadow({mode:"open"}).getSelection),ot=window.ShadyDOM&&window.ShadyDOM.inUse,rt=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,it=!et||ot||!nt&&!rt,lt=/^(area|base|br|col|command|embed|hr|img|input|keygen|link|meta|param|script|source|style|template|track|wbr)$/,ct=[Node.ELEMENT_NODE,Node.TEXT_NODE,Node.DOCUMENT_FRAGMENT_NODE];function at(t,e,n){const o=e.childNodes||e.children;if(!o)return e;for(let i=0;i<o.length;++i){const l=o[n?i:o.length-1-i];if(r=l,ct.includes(r.nodeType)){if(tt&&console.debug("checking child",l,"IsLeft",n),t.containsNode(l,!0)){if(t.containsNode(l,!1))return tt&&console.info("found child",l),l;if(!lt.exec(l.localName||""))return tt&&console.info("descending child",l),at(t,l,n)}tt&&console.info(e,"does NOT contain",l)}}var r;return e}let st={node:null,offset:-1};function ut(t,e,n){const o=e;for(;(e=ft(e,n))&&e.contains(o););return!!e&&(e instanceof Element&&t.containsNode(e,!0))}function ft(t,e){if(!e)return t.previousSibling||t.parentNode||null;for(;t;){if(t.nextSibling)return t.nextSibling;t=t.parentNode}return null}!function(){if(nt||it)return document.addEventListener("selectionchange",(t=>{document.dispatchEvent(new CustomEvent("-shadow-selectionchange"))})),()=>{};let t=!1;document.addEventListener("selectionchange",(e=>{if(t)return;t=!0;const n=window.getSelection();if("Caret"===n.type){const t=function(t,e){const n=[],o=t=>{for(let e=0;e<t.length;++e)t[e].shadowRoot&&n.push(t[e].shadowRoot)};for(e.shadowRoot&&n.push(e.shadowRoot),o(e.childNodes);n.length;){const e=n.shift();for(let n=0;n<e.childNodes.length;++n)if(t.containsNode(e.childNodes[n],!0))return e;o(e.querySelectorAll("*"))}return null}(n,n.anchorNode);if(t instanceof window.ShadowRoot){const e=function(t){if(it){const e=document.getSelection();return e.containsNode(t,!0)?e.getRangeAt(0):null}if(nt){const e=t.getSelection();return e.rangeCount?e.getRangeAt(0):null}const e=dt.get(t);if(e)return e;const n=function(t){const e=window.getSelection();if("None"===e.type)return{range:null,type:"none"};if("Caret"!==e.type&&"Range"!==e.type)throw new TypeError("unexpected type: "+e.type);const n=at(e,t,!0);if(n===t)return{range:null,mode:"none"};const o=document.createRange();let r,i=null;if("Range"===e.type&&(i=at(e,t,!1),r=function(t,e,n){if("Range"!==t.type)return;const o=()=>t.toString().length,r=o();let i;if(tt&&console.info(`initial selection: "${t.toString()}"`),t.modify("extend","forward","character"),i=o(),tt&&console.info(`forward selection: "${t.toString()}"`),i>r||ut(t,n,!0))return tt&&console.info("got forward >, moving right"),t.modify("extend","backward","character"),!0;if(i<r||!t.containsNode(e))return tt&&console.info("got forward <, moving left"),t.modify("extend","backward","character"),!1;if(t.modify("extend","backward","character"),i=o(),tt&&console.info(`backward selection: "${t.toString()}"`),i>r||ut(t,e,!1))return tt&&console.info("got backwards >, moving left"),t.modify("extend","forward","character"),!1;if(i<r||!t.containsNode(n))return tt&&console.info("got backwards <, moving right"),t.modify("extend","forward","character"),!0;return}(e,n,i),void 0===r))return o.setStart(n,0),o.setEnd(i,i.length),{range:o,mode:"all"};const l=e.toString().length;let c=0,a=0;if(null===i);else if(i.nodeType===Node.TEXT_NODE){const t=i.textContent,n=i.nextSibling;for(let n=t.length-1;n>=0;--n){i.splitText(n);if(e.toString().length!==l){a=n+1;break}}for(i.insertData(i.length,t.substr(i.length));i.nextSibling!==n;)i.nextSibling.remove()}if(n.nodeType===Node.TEXT_NODE){n!==i&&(n.appendData("?"),e.collapseToStart(),e.modify("extend","right","character"));const t=n.textContent,o=n.nextSibling;for(let o=n===i?a:t.length-1;o>=0;--o)if(n.splitText(o),""===e.toString()){c=o;break}for(n.insertData(n.length,t.substr(n.length));n.nextSibling!==o;)n.nextSibling.remove();n!==i&&n.deleteData(n.length-1,1),null===i&&(i=n,a=c)}else null===i&&(i=n);1===l&&st&&st.node===n&&st.offset>c&&r&&(r=!1);!0===r?(e.collapse(n,c),e.extend(i,a)):!1===r?(e.collapse(i,a),e.extend(n,c)):e.setPosition(n,c);return o.setStart(n,c),o.setEnd(i,a),{range:o,mode:"normal"}}(t);return dt.set(t,n.range),window.setTimeout((()=>{dt.delete(t)}),0),tt&&console.debug("getRange got",n),n.range}(t);if(e){const t=e.startContainer,n=e.startOffset;st={node:t,offset:n}}}}document.dispatchEvent(new CustomEvent("-shadow-selectionchange")),window.requestAnimationFrame((()=>{t=!1}))}))}();const dt=new Map;function pt(t,e,n){const o=t.slice();return o[42]=e[n],o}function ht(t,e,n){const o=t.slice();return o[42]=e[n],o}function gt(t,e,n){const o=t.slice();return o[49]=e[n],o}function mt(t){let e,n;return{c(){e=b("span"),n=w(">>"),_(e,"color",t[0])},m(t,o){h(t,e,o),p(e,n)},p(t,n){1&n[0]&&_(e,"color",t[0])},d(t){t&&g(e)}}}function bt(t){let e,n,o,r,i,l=t[49][0]+"",c=t[49][1]&&mt(t);return{c(){e=b("console-line"),c&&c.c(),n=y(),o=b("span"),r=y(),v(o,"class","value"),k(e,"byuser",i=t[49][1])},m(t,i){h(t,e,i),c&&c.m(e,null),p(e,n),p(e,o),o.innerHTML=l,p(e,r)},p(t,r){t[49][1]?c?c.p(t,r):(c=mt(t),c.c(),c.m(e,n)):c&&(c.d(1),c=null),32&r[0]&&l!==(l=t[49][0]+"")&&(o.innerHTML=l),32&r[0]&&i!==(i=t[49][1])&&k(e,"byuser",i)},d(t){t&&g(e),c&&c.d()}}}function wt(t){let e,n;return{c(){e=b("span"),n=w(t[48]),_(e,"color",t[1])},m(t,o){h(t,e,o),p(e,n)},p(t,n){2&n[0]&&_(e,"color",t[1])},d(t){t&&g(e)}}}function yt(t){let e,n,r,i,a,s,u,f,d;function m(...e){return t[25](t[47],...e)}return{c(){e=b("div"),n=b("div"),r=b("span"),i=w(t[2]),a=y(),s=b("textarea"),v(r,"class","placeholder"),v(n,"class","highlighted-text"),v(n,"aria-hidden",""),v(s,"class","input"),v(s,"placeholder",t[2]),v(s,"autocomplete","off"),v(s,"autocorrect","off"),v(s,"autocapitalize","off"),v(s,"spellcheck","false"),v(s,"role","textbox"),v(e,"class","input-field-wrapper")},m(l,g){var b;h(l,e,g),p(e,n),p(n,r),p(r,i),t[23](n),p(e,a),p(e,s),t[24](s),f||(d=[(b=u=t[17].call(null,s),b&&c(b.destroy)?b.destroy:o),x(s,"keydown",m),x(s,"keyup",t[13]),x(s,"input",t[14])],f=!0)},p(e,n){t=e,4&n[0]&&$(i,t[2]),4&n[0]&&v(s,"placeholder",t[2])},d(n){n&&g(e),t[23](null),t[24](null),f=!1,l(d)}}}function xt(t){let e;return{c(){e=b("span"),e.textContent="Loading..."},m(t,n){h(t,e,n)},p:o,d(t){t&&g(e)}}}function vt(t){let e,n,o,r,i,c,a,s,u=t[10],f=[];for(let e=0;e<u.length;e+=1)f[e]=kt(ht(t,u,e));let d=t[4]&&$t(t);return{c(){e=b("section"),n=b("button"),n.textContent="←",o=y();for(let t=0;t<f.length;t+=1)f[t].c();r=y(),i=b("button"),i.textContent="→",c=y(),d&&d.c(),v(n,"class","arrow left"),v(i,"class","arrow right"),v(e,"class","button-panel")},m(l,u){h(l,e,u),p(e,n),p(e,o);for(let t=0;t<f.length;t+=1)f[t]&&f[t].m(e,null);p(e,r),p(e,i),p(e,c),d&&d.m(e,null),a||(s=[x(n,"click",t[26]),x(i,"click",t[27])],a=!0)},p(t,n){if(33792&n[0]){let o;for(u=t[10],o=0;o<u.length;o+=1){const i=ht(t,u,o);f[o]?f[o].p(i,n):(f[o]=kt(i),f[o].c(),f[o].m(e,r))}for(;o<f.length;o+=1)f[o].d(1);f.length=u.length}t[4]?d?d.p(t,n):(d=$t(t),d.c(),d.m(e,null)):d&&(d.d(1),d=null)},d(t){t&&g(e),m(f,t),d&&d.d(),a=!1,l(s)}}}function kt(t){let e,n,r,i,l=t[42]+"";return{c(){e=b("button"),n=w(l)},m(o,l){h(o,e,l),p(e,n),r||(i=x(e,"click",t[15]),r=!0)},p:o,d(t){t&&g(e),r=!1,i()}}}function $t(t){let e,n=t[11],o=[];for(let e=0;e<n.length;e+=1)o[e]=_t(pt(t,n,e));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=w("")},m(t,n){for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,n);h(t,e,n)},p(t,r){if(34816&r[0]){let i;for(n=t[11],i=0;i<n.length;i+=1){const l=pt(t,n,i);o[i]?o[i].p(l,r):(o[i]=_t(l),o[i].c(),o[i].m(e.parentNode,e))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(t){m(o,t),t&&g(e)}}}function _t(t){let e,n,r,i,l=t[42]+"";return{c(){e=b("button"),n=w(l)},m(o,l){h(o,e,l),p(e,n),r||(i=x(e,"click",t[15]),r=!0)},p:o,d(t){t&&g(e),r=!1,i()}}}function St(t){let e,r,i,l,c,a,s,u,f,d,x,k=t[5],$=[];for(let e=0;e<k.length;e+=1)$[e]=bt(gt(t,k,e));let S={ctx:t,current:null,token:null,hasCatch:!0,pending:xt,then:yt,catch:wt,value:47,error:48};B(d=n.e(1).then(n.bind(null,6)),S);let E=t[3]&&vt(t);return{c(){e=b("div"),r=b("section"),i=b("slot"),l=y();for(let t=0;t<$.length;t+=1)$[t].c();c=y(),a=b("section"),s=b("span"),u=w(">> "),f=y(),S.block.c(),x=y(),E&&E.c(),this.c=o,v(r,"class","output"),v(s,"class","prompt"),_(s,"color",t[0]),v(a,"class","input-area"),v(e,"class","calculator")},m(n,o){h(n,e,o),p(e,r),p(r,i),p(r,l);for(let t=0;t<$.length;t+=1)$[t]&&$[t].m(r,null);t[22](r),p(e,c),p(e,a),p(a,s),p(s,u),p(a,f),S.block.m(a,S.anchor=null),S.mount=()=>a,S.anchor=null,p(e,x),E&&E.m(e,null),t[28](e)},p(n,o){if(t=n,33&o[0]){let e;for(k=t[5],e=0;e<k.length;e+=1){const n=gt(t,k,e);$[e]?$[e].p(n,o):($[e]=bt(n),$[e].c(),$[e].m(r,null))}for(;e<$.length;e+=1)$[e].d(1);$.length=k.length}1&o[0]&&_(s,"color",t[0]),function(t,e,n){const o=e.slice(),{resolved:r}=t;t.current===t.then&&(o[t.value]=r),t.current===t.catch&&(o[t.error]=r),t.block.p(o,n)}(S,t,o),t[3]?E?E.p(t,o):(E=vt(t),E.c(),E.m(e,null)):E&&(E.d(1),E=null)},i:o,o:o,d(n){n&&g(e),m($,n),t[22](null),S.block.d(),S.token=null,S=null,E&&E.d(),t[28](null)}}}function Et(t,e,n,o=!1){let r=0,i=0;for(const l of t){if(o&&"\n"==l)break;l==e&&r++,l==n&&i++}return r>i}function Nt(t){switch(t){case"0":return"₀";case"1":return"₁";case"2":return"₂";case"3":return"₃";case"4":return"₄";case"5":return"₅";case"6":return"₆";case"7":return"₇";case"8":return"₈";case"9":return"₉";case"+":return"₊";case"-":return"₋";case"=":return"₌";case"(":return"₍";case")":return"₎"}return t}function Tt(t,e,n){let o,r,i,l,c,{identifiercolor:a="cornflowerblue"}=e,{operatorcolor:s="darkorange"}=e,{promptcolor:u="mediumseagreen"}=e,{errorcolor:f="tomato"}=e,{linkcolor:d="cornflowerblue"}=e,{hinttext:p=""}=e,{autofocus:h=!1}=e,{buttonpanel:g=!1}=e,{numberrow:m=!1}=e,b=[],w=0,y=!1,x=10;var v;function k(t,e=!1,n=!1){const[o,r]=C(t,e?v.History:v.InputField),i=l.selectionStart;$(o),n||S(i+r)}function $(t){n(9,c.innerHTML=t,c),n(8,l.value=c.innerText,l),t||n(9,c.innerHTML=`<span class='placeholder'>${p}</div>`,c)}function _(){return c.innerHTML}function S(t){n(8,l.selectionStart=t,l),n(8,l.selectionEnd=l.selectionStart,l)}function E(t){S(l.selectionStart+t)}function N(t,e){if("Enter"==t.key){if(Et(t.target.value,"{","}")||Et(t.target.value,"[","]"))return;w=0;const c=l.value;let a;if(""==c)return;if("help"==c.trim())a=`<a style="color: ${d}"\n                             href="https://kalker.xyz/#usage"\n                             target="blank">Link to usage guide</a>`;else if(/base\s\d\d?/.test(c.trim())){const t=Number(c.trim().slice(5));t<=1||t>=50?a=`<span style="color: ${f}">Invalid base.</span>`:x=t}else{if("clear"==c.trim())return n(5,b=[]),void k("");{let[t,n]=function(t,e){try{r||(r=new t.Context);const n=r.evaluate(e.replaceAll(/\s+/g," "));return n&&!n.setRadix(x)?["Invalid base",!1]:[null==n?void 0:n.toPrettyString(),!0]}catch(t){return[t,!1]}}(e,c);a=n?C(t,v.Output)[0]:`<span style="color: ${f}">${t}</span>`}}k(t.target.value,!0),n(5,b=a?[...b,[_(),!0],[a,!1]]:[...b,[_(),!0]]),k("");let s=0;setInterval((()=>{60!=s&&(o.children[o.children.length-1].scrollIntoView(),i.scrollIntoView(!1),s++)}),10)}}function T(t,e){const n=l.value.length,o=l.selectionEnd+(e?-1:1);S(Math.min(Math.max(o,0),n)),l.focus({preventScroll:!0})}function O(t){let e=0;"("==t?(t+=")",e=-1):"="==t?t=" = ":"∑"==t||"∫"==t?(t+="()",e=-1):"⌊"==t?(t+="⌋",e=-1):"⌈"==t?(t+="⌉",e=-1):","==t&&(t=", "),y=!0,l.setRangeText(t,l.selectionStart,l.selectionEnd,"end"),k(l.value),y=!1,E(e),l.focus({preventScroll:!0})}function C(t,e){if(!t)return["",0];let n=t,o=0;return n=n.replace(/(?<power>\^[0-9T])|(?<brackets>\[\[)|(?<radix>0[box][a-zA-Z0-9]+)|(?<comparison>(!=|[<>]=?))|(?<html>[<>&]|(\n\s*\}?|\s+))|(?<op>([+\-/*%^!≈×÷⋅∧∨¬ᵀ]|if|otherwise|and|or|mod|true|false|not)|(?<identifier>[^!-@\s_|^⌊⌋⌈⌉≈\[\]\{\}⟦⟧≠≥≤⁰¹²³⁴⁵⁶⁷⁸⁹⁺⁻⁼⁽⁾₀₁₂₃₄₅₆₇₈₉₊₋₌₍₎×÷⋅∧∨ᵀ]+(_\d+)?)\(?)/g,((n,r,i,l,c,u,f,d,p,h,g)=>{if(r&&"^T"==n&&(n="ᵀ"),i&&"[["==n)return o-=1,"⟦⟧";if(u){if("<="==n)return"≤";if(">="==n)return"≥";if("!="==n)return"≠";if("<"==n)return"&lt;";if(">"==n)return"&gt;"}if(d){if("&"==n)return"&amp;";if(n.startsWith("\n")){if(n.endsWith("}"))return"<br />}";if(n.endsWith("]"))return"<br />]";{let r=2;if(Et(t,"[","]",!0)){let e=t.indexOf("[");r=-1==e?r:e+1}if(n.match(/\n\s/)||(o+=r),e==v.Output)return"<br />";if(e==v.InputField)return"<br />"+"&nbsp;".repeat(r);if(e==v.History)return"<br />"+"&nbsp;".repeat(r+3)}}if(n.match(/\s+/))return"&nbsp;".repeat(n.length)}if(h&&e!=v.Output&&("*"==n&&(n="⋅"),"/"==n&&(n="÷"),"and"==n&&(n="∧"),"or"==n&&(n="∨"),"not"==n&&(n="¬")),g){let t=n.endsWith("(")?n.slice(0,-1):n,e=t,r=!1;switch(t){case"sqrt":e="√";break;case"sum":e="∑",r=!0;break;case"prod":e="∏",r=!0;break;case"integral":case"integrate":e="∫",r=!0;break;case"pi":e="π";break;case"phi":e="ϕ";break;case"gamma":e="Γ";break;case"floor":e="⌊⌋";break;case"ceil":e="⌈⌉";break;case"asin":e="sin⁻¹",r=!0;break;case"acos":e="cos⁻¹",r=!0;break;case"atan":e="tan⁻¹",r=!0;break;case"acot":e="cot⁻¹",r=!0;break;case"acosec":e="cosec⁻¹",r=!0;break;case"asec":e="sec⁻¹",r=!0;break;case"asinh":e="sinh⁻¹",r=!0;break;case"acosh":e="cosh⁻¹",r=!0;break;case"acoth":e="coth⁻¹",r=!0;break;case"acosech":e="cosech⁻¹",r=!0;break;case"asech":e="sech⁻¹",r=!0;break;case"cbrt":e="∛"}let i=e.lastIndexOf("_");if(-1!=i){let t="";for(let n=i+1;n<e.length;n++)t+=Nt(e[n]);e=e.slice(0,i)+t}o-=n.length-e.length;let l="";return n.endsWith("(")?(l="(",o+=1):r&&(l="()",o+=1),`<span style="color: ${a}">${e}</span>${l}`}return h?`<span style="color: ${s}">${n}</span>`:n})),n=n.replace(/([_₀₁₂₃₄₅₆₇₈₉₊₋₌₍₎]\d+)/g,(t=>{let e=t.replace("_","").replace(/\d/,Nt);return o-=t.length-e.length,e})),[n,o]}!function(t){t[t.Output=0]="Output",t[t.InputField=1]="InputField",t[t.History=2]="History"}(v||(v={}));return t.$$set=t=>{"identifiercolor"in t&&n(18,a=t.identifiercolor),"operatorcolor"in t&&n(19,s=t.operatorcolor),"promptcolor"in t&&n(0,u=t.promptcolor),"errorcolor"in t&&n(1,f=t.errorcolor),"linkcolor"in t&&n(20,d=t.linkcolor),"hinttext"in t&&n(2,p=t.hinttext),"autofocus"in t&&n(21,h=t.autofocus),"buttonpanel"in t&&n(3,g=t.buttonpanel),"numberrow"in t&&n(4,m=t.numberrow)},[u,f,p,g,m,b,o,i,l,c,["+","-","×","÷","^","=",".","(","√","π",",","%","∑","⌊","⌈","∫"],["1","2","3","4","5","6","7","8","9","0"],N,function(t){if("ArrowUp"==t.key||"ArrowDown"==t.key){if(l.value.match(/\r|\r\n|\n/))return;const e="ArrowUp"==t.key?1:-1;if(w+=e,w<0)return k(""),void(w=0);const n=b.length-w-1;let o=b[n];for(;o&&!o[1];)o=b[n-e],w+=e;o&&$(o[0]),w>=b.length&&(w=b.length-1)}},function(t){if(y)return void(y=!1);const e=t,n=e.target;k("\n"==n.value?"":n.value,void 0,e.isComposing),"("==e.data&&(O(")"),E(-1))},function(t){const e=t.target;e.blur(),O(e.textContent)},T,function(t){h&&t.focus()},a,s,d,h,function(t){M[t?"unshift":"push"]((()=>{o=t,n(6,o)}))},function(t){M[t?"unshift":"push"]((()=>{c=t,n(9,c)}))},function(t){M[t?"unshift":"push"]((()=>{l=t,n(8,l)}))},(t,e)=>N(e,t),t=>T(0,!0),t=>T(0,!1),function(t){M[t?"unshift":"push"]((()=>{i=t,n(7,i)}))}]}class Ot extends J{constructor(t){super();const e=document.createElement("style");e.textContent='.calculator{display:flex;flex-direction:column;width:100%;height:100%;box-sizing:border-box;background-color:inherit;color:inherit}.calculator .output{display:flex;flex-grow:1;flex-direction:column;background-color:inherit;padding:10px;padding-bottom:0;box-sizing:border-box;font-size:1.4em;overflow:auto}.calculator .output>:first-child{margin-top:auto}.calculator .input-area{display:flex;background-color:inherit;display:flex;padding-left:10px;font-size:1.4em;padding-bottom:10px;box-sizing:border-box}.calculator .placeholder{color:gray}.calculator .prompt{background-color:inherit}.calculator .input-field-wrapper{position:relative;width:100%}.calculator .highlighted-text{display:inline-block;width:100%;color:white;word-wrap:anywhere;line-height:1;z-index:1}.calculator .input{display:inline-block;position:absolute;top:0;left:0;height:100%;width:100%;border:0;font-size:inherit;font-family:inherit;line-height:1;overflow:hidden;cursor:text;color:transparent;background:transparent;caret-color:white;resize:none;z-index:2;word-wrap:anywhere}.calculator .input:focus{outline:none}.calculator .button-panel{display:grid;grid-template-columns:repeat(10, auto);grid-template-rows:repeat(3, auto)}.calculator .button-panel{width:100%}.calculator .button-panel button{margin-right:4px;margin-bottom:4px;position:relative;border:0;padding:2.5vw;font-size:6.5vw;line-height:1.2;background-color:inherit;font-family:inherit;color:inherit;cursor:pointer}@media screen and (min-width: 768px){.calculator .button-panel button{padding:12px;font-size:1.4em}}.calculator .button-panel button:after{content:"";position:absolute;left:0px;top:0px;right:0px;bottom:0px;background-color:rgba(0, 0, 0, 0.2)}.calculator .button-panel button:last-child{margin-right:0}.calculator .arrow.left{grid-area:1/1/span 2/1}.calculator .arrow.right{margin-right:0;grid-area:1/10/span 2/10}',this.shadowRoot.appendChild(e),G(this,{target:this.shadowRoot,props:E(this.attributes),customElement:!0},Tt,St,a,{identifiercolor:18,operatorcolor:19,promptcolor:0,errorcolor:1,linkcolor:20,hinttext:2,autofocus:21,buttonpanel:3,numberrow:4},null,[-1,-1]),t&&(t.target&&h(t.target,this,t.anchor),t.props&&(this.$set(t.props),H()))}static get observedAttributes(){return["identifiercolor","operatorcolor","promptcolor","errorcolor","linkcolor","hinttext","autofocus","buttonpanel","numberrow"]}get identifiercolor(){return this.$$.ctx[18]}set identifiercolor(t){this.$$set({identifiercolor:t}),H()}get operatorcolor(){return this.$$.ctx[19]}set operatorcolor(t){this.$$set({operatorcolor:t}),H()}get promptcolor(){return this.$$.ctx[0]}set promptcolor(t){this.$$set({promptcolor:t}),H()}get errorcolor(){return this.$$.ctx[1]}set errorcolor(t){this.$$set({errorcolor:t}),H()}get linkcolor(){return this.$$.ctx[20]}set linkcolor(t){this.$$set({linkcolor:t}),H()}get hinttext(){return this.$$.ctx[2]}set hinttext(t){this.$$set({hinttext:t}),H()}get autofocus(){return this.$$.ctx[21]}set autofocus(t){this.$$set({autofocus:t}),H()}get buttonpanel(){return this.$$.ctx[3]}set buttonpanel(t){this.$$set({buttonpanel:t}),H()}get numberrow(){return this.$$.ctx[4]}set numberrow(t){this.$$set({numberrow:t}),H()}}customElements.define("kalk-calculator",Ot);var Ct=Ot}]).default;